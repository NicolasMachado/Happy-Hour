<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_only_controller</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Controller

instance_create(-1, -1, obj_fade_screen);

// set cursor
cursor_sprite = spr_main_cursor;
window_set_cursor(cr_none);

//set pause
global.gamepause = false;

// get real random
randomize();

// is an item selected from menu?
global.selecteditem = "";
global.selectedmenu = "";

// is something selected
global.selected = "";

// item rotation
global.itemrot = 0;

// Audio
audio_group_load(Sound_FX);
audio_group_load(Music_gen);
global.SFX = 1;
global.music = 1;

// list of messages
global.messagesactivated = 1;
global.messageslist = ds_queue_create();
global.messages = "";
MESSAGE = -1;
global.messagex = 40;
global.messagey = 60;
scr_UI_create_messages_table();
alarm[1] = 2*room_speed; // send first messages

// launch avg wiating time timer
alarm[2] = 2*room_speed;

// update cooldown counter
cooldownrate = room_speed; // every x seconds
upcdcount = cooldownrate;

// show debug info
global.showdebug = 0;
global.showdebug1 = 0;
global.showdebug2 = 0;
global.showgrid = 0;

// medals
global.bronzemedal = 0;
global.silvermedal = 0;
global.goldmedal = 0;
alarm[4] = room_speed;

// counting seats globals
global.nbseats = 0;
global.nboccseats = 0;
global.nbfreeseats = 0;
global.unreachableseats = 0;

global.nbtoiletseats = 0;
global.nbocctseats = 0;
global.nbfreetseats = 0;
global.unreachabletoiletseats = 0;

global.nbbarspots = 0;
global.unreachablebarspots = 0;
global.nboccbarspots = 0;
global.nbfreebarspots = 0; 

global.spawner = instance_find(obj_spawner_r, 0);

global.placeable = false;

global.money = 2000;

global.tutorial = 1;

global.reputation = 50;
global.wealth = 1;

global.avgwaitingtime = 0;

global.leftnotoilet = 0;
global.leftwaitedtoolong = 0;
alarm[0] = 5*room_speed;

scr_UI_create_drinks_table();
scr_UI_create_items_table();

// Scale for the UI elements (updated everytime scr_UI_zoom is called)
global.zoom_scale_w = view_wview[0]/(room_width-128);
global.zoom_scale_h = view_hview[0]/room_height;

// Location of target window
view1_x = 869;
view1_y = 40;

// create log
for (i=0; i&lt;5; i++) {
    global.log[i] = "";
}

// order list 
orderslist = ds_list_create();

// GUI info
reputationbarsize = 140; // width
reputationbarheight = 28; // height
blackbarsize = 28; // height
posmedals = view_wport[0]/1.5; // medals x
global.UIcolorlight = make_color_rgb(178, 194, 224);
global.UIcolormedium = make_color_rgb(145, 171, 202);
global.UIcolordark = make_color_rgb(119, 139, 177);
global.UIcolordarker = make_color_rgb(97, 119, 159);
global.starcolor = make_color_rgb(231, 231, 90);
global.buttonblendcolor = make_color_rgb(220, 220, 250);
global.buttonblendcolor2 = make_color_rgb(220, 220, 220);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="4">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// check medals

if global.bronzemedal == 0 {
    if global.money &gt; obj_bronze_interact.balance &amp;&amp;
    global.reputation/20 &gt; obj_bronze_interact.reputation &amp;&amp;
    global.wealth*100 &gt; obj_bronze_interact.wealth &amp;&amp;
    global.avgwaitingtime &lt; obj_bronze_interact.waittime {
        global.bronzemedal = 1;
        audio_play_sound(snd_victory, 1, false);      
        scr_UI_message_box(19);
    }
}

if global.silvermedal == 0 {
    if global.money &gt; obj_silver_interact.balance &amp;&amp;
    global.reputation/20 &gt; obj_silver_interact.reputation &amp;&amp;
    global.wealth*100 &gt; obj_silver_interact.wealth &amp;&amp;
    global.avgwaitingtime &lt; obj_silver_interact.waittime {
        global.silvermedal = 2;
        audio_play_sound(snd_victory, 1, false);      
        scr_UI_message_box(20);
    }
}

if global.goldmedal == 0 {
    if global.money &gt; obj_gold_interact.balance &amp;&amp;
    global.reputation/20 &gt; obj_gold_interact.reputation &amp;&amp;
    global.wealth*100 &gt; obj_gold_interact.wealth &amp;&amp;
    global.avgwaitingtime &lt; obj_gold_interact.waittime {
        global.goldmedal = 3;
        audio_play_sound(snd_victory, 1, false);      
        scr_UI_message_box(21);
    }
}

alarm[4] = room_speed;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// calculate wealth

scr_wealth_calculation();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="2">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// average waiting time calculation
alarm[2] = 10;

var avgtime = 0;

var nbcust = instance_number(obj_customer);
var divider = 0;

// get avgtime from all active customer
for (i=0; i&lt;nbcust; i++) {
    cust = instance_find(obj_customer, i);
    if cust.haswaited &gt; 0 {
        avgtime += cust.haswaited;
        divider++;
    }
}
// calculate avg time global
if avgtime != 0 {
    global.avgwaitingtime = avgtime / divider;
} else {
    global.avgwaitingtime = 0;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// set first message boxes

scr_UI_message_box(0);
scr_UI_message_box(2);
scr_UI_message_box(15);
scr_UI_message_box(5);
scr_UI_message_box(6);
scr_UI_message_box(7);
scr_UI_message_box(8);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// -1 to globals of customers leaving alert

// left because no toilet
global.leftnotoilet--;

if global.leftnotoilet &lt; 0 {
    global.leftnotoilet = 0;
} else if global.leftnotoilet &gt; 10 {
    scr_UI_message_box(13);
    global.leftnotoilet = 0;
}

// left because waited for too long
global.leftwaitedtoolong--;

if global.leftwaitedtoolong &lt; 0 {
    global.leftwaitedtoolong = 0;
} else if global.leftwaitedtoolong &gt; 10 {
    scr_UI_message_box(14);
    global.leftwaitedtoolong = 0;
}


alarm[0] = 8*room_speed;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Viewport movement

// view movement
var camspd = 10;

if keyboard_check(vk_right) {
    view_xview[0] += camspd;
}
if keyboard_check(vk_left) {
    view_xview[0] -= camspd;
}
if keyboard_check(vk_up) {
    view_yview[0] -= camspd;
}
if keyboard_check(vk_down) {
    view_yview[0] += camspd;
}

// zoom
if global.selecteditem == "" {
    if mouse_wheel_down() {
        scr_UI_zoom(128);
    }
    
    if mouse_wheel_up() {
        scr_UI_zoom(-128); 
    }
}

// stick view inside roomm
if view_xview &lt; 64 {view_xview = 64;}
if view_yview &lt; 0 {view_yview = 0;}
if view_xview &gt; room_width-view_wview[0]-64 {view_xview = room_width-view_wview[0]-64;}
if view_yview &gt; room_height-view_hview[0] {view_yview = room_height-view_hview[0];}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Global key presses

switch (keyboard_key)
{
    /*
    case vk_f1: global.selecteditem = obj_wall; break;
    case vk_f2: global.selecteditem = ""; break; //
    case vk_f3: global.selecteditem = "bulldozer"; break;
    case vk_f4: global.selecteditem = ""; break;
    case vk_f5: global.selecteditem = obj_chair_simple; break;
    case vk_f6: global.selecteditem = obj_toilet_spot; break;
    case vk_f7: global.selecteditem = obj_server; break;
    case vk_f8: global.selecteditem = global.items[0,0]; break;
    */
    
    case vk_escape: global.selecteditem = ""; 
    global.selectedmenu = "";
    if global.selected != "" {
        global.selected = ""; 
        view_visible[1] = false;
    }
    break;
}

/*

if keyboard_check_pressed(vk_f12) {
    global.showdebug = 1-global.showdebug;
}

if keyboard_check_pressed(vk_f11) {
    global.showdebug1 = 1-global.showdebug1;
}

if keyboard_check_pressed(vk_f10) {
    global.showdebug2 = 1-global.showdebug2;
}

if keyboard_check_pressed(vk_f9) {
    global.showgrid = 1-global.showgrid;
}
*/
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Item rotation degrees
if (global.selecteditem != "" &amp;&amp; global.selecteditem != "bulldozer") {

    var rot = global.itemrot;
    if mouse_wheel_up() {
        audio_play_sound(snd_woosh, 1, false);
        rot += 90;
        if rot == 360 {
            rot = 0;
        }
        global.itemrot = rot;
    }
    
    if mouse_wheel_down() {
        audio_play_sound(snd_woosh, 1, false);
        rot -= 90;
        if rot &lt; 0 {
            rot = 270;
        }
        global.itemrot = rot;
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// view[1] follow selected item

if global.selected != "" {
    view_xview[1] = global.selected.x - (view_wview[1]/2);
    view_yview[1] = global.selected.y - (view_hview[1]/2) - 15;
    
    view_xport[1] = view1_x;
    view_yport[1] = view1_y;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// messages cooldown

// update cooldown counter
upcdcount -= 1;

if upcdcount &lt; 1 { // every x seconds
    // run through cdmessage sarray
    for (i = 0; i &lt; array_length_1d(cdmessages); i++) {
    
        if cdmessages[i] &gt; 0 &amp;&amp; global.messages[4,i] != -1 &amp;&amp; global.messages[3,i] { 
            // remove x seconds
            cdmessages[i] -= cooldownrate;
            
        } else { // or reset it
        
            cdmessages[i] = global.messages[4,i];
            
            if global.messages[4,i] != -1 { // if the message is cooldown type
                global.messages[3,i] = false; // mark as not read
            }
        }        
    }    
    upcdcount = cooldownrate;
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="56">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Create instance under mouse

if (global.selecteditem == "" &amp;&amp; !position_meeting(mouse_x, mouse_y, obj_button)) {
    global.selectedmenu = "";
    exit;   
}

if !position_meeting(mouse_x, mouse_y, obj_button) {
    if (global.selecteditem == "bulldozer") {
        scr_UI_bulldoze_under_mouse(global.selecteditem);
    } else {
        var parent = object_get_parent(global.selecteditem);
        switch (parent)
        {
            case obj_table: scr_UI_create_solid_under_mouse(global.selecteditem); break;
            case obj_chair: scr_UI_create_ghost_under_mouse(global.selecteditem); break;
            case obj_bar: scr_UI_create_solid_under_mouse(global.selecteditem); break;
            case obj_toilet: scr_UI_create_solid_under_mouse(global.selecteditem); break;
        }
        switch (global.selecteditem)
        {
            case obj_wall: scr_UI_create_wall_under_mouse(global.selecteditem); break;
            case obj_server: scr_UI_create_ghost_under_mouse(global.selecteditem); break;
            case obj_server_bar_spot: scr_UI_create_ghost_under_mouse(global.selecteditem); break;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="53">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Select with left click

if (global.selecteditem == "" &amp;&amp; view_current == 0 &amp;&amp; !collision_point(mouse_x, mouse_y, obj_button, false, true)) {
    var inst = collision_rectangle(mouse_x-3, mouse_y-3,mouse_x+3, mouse_y+20, obj_characters, true, true);
    if (inst &amp;&amp; (object_get_name(inst.object_index) == "obj_customer" || object_get_name(inst.object_index) == "obj_server")) {
        global.selected = inst;
        scr_UI_log_write("You have selected instance " + object_get_name(inst.object_index) + " - " + string(inst));
        view_visible[1] = true;
    } 
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="6" enumb="51">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// unselect

global.selecteditem = "";
global.selected = "";
view_visible[1] = false;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="3">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Destroy

ds_list_destroy(orderslist);
ds_queue_destroy(global.messageslist);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="73">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Draw selected instance under mouse

if (global.selecteditem == "") {exit};

var parent = object_get_parent(global.selecteditem);

if parent != -1 &amp;&amp; parent != -100 &amp;&amp; global.selecteditem != "bulldozer" {
    switch (parent)
    {
        case obj_table: scr_draw_table_under_mouse(); break;
        case obj_chair: scr_draw_chair_under_mouse(); break;
        case obj_bar: scr_draw_bar_under_mouse(); break;
        case obj_toilet: scr_draw_toilet_under_mouse(); break;
        case obj_characters: scr_draw_server_under_mouse(); break;
        default: scr_draw_selected_under_mouse();
    }
} else {
    switch (global.selecteditem)
    {
        case "bulldozer": scr_draw_bulldozer_under_mouse(); break;
        default: scr_draw_selected_under_mouse();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// GUI

// Black bar on top
draw_set_alpha(1);
draw_rectangle_colour(0, 0, view_wport[0], blackbarsize+8, global.UIcolordark, global.UIcolordark, global.UIcolordark, global.UIcolordark, false);
draw_rectangle_colour(0, 0, view_wport[0], blackbarsize+4, global.UIcolormedium, global.UIcolormedium, global.UIcolormedium, global.UIcolormedium, false);
draw_rectangle_colour(0, 0, view_wport[0], blackbarsize, global.UIcolorlight, global.UIcolorlight, global.UIcolorlight, global.UIcolorlight, false);
draw_set_alpha(1);

// Money display
draw_set_font(UI_2);
if global.money &gt; 0 {draw_set_colour(global.UIcolordarker);} else {draw_set_colour(c_red);}
draw_set_valign(fa_middle);
draw_text(5, (blackbarsize/2), "$" + string(global.money));
draw_set_valign(fa_top);

// Stars
draw_healthbar(view_wport[0]/2-(reputationbarsize/2), (blackbarsize/2) - (reputationbarheight/2)-1, view_wport[0]/2+(reputationbarsize/2)-1, (blackbarsize/2) + (reputationbarheight/2)-1, global.reputation, global.UIcolordark, global.starcolor, global.starcolor, 0, true, false);
draw_sprite(spr_stars, 0, view_wport[0]/2, (blackbarsize/2));

// chrono
draw_healthbar(view_wport[0]/4 - 12, 2, view_wport[0]/4 + 12, blackbarsize-2, global.avgwaitingtime*10, global.UIcolordark, global.starcolor, c_orange, 3, true, false);
draw_sprite(spr_chrono, 0, view_wport[0]/4, (blackbarsize/2)+1);

// messages button on/off
draw_sprite(spr_messages_button, global.messagesactivated, view_wport[0]/1.02, (blackbarsize/2)+1);

// SFX button on/off
draw_sprite(spr_SFX_button, global.SFX, view_wport[0]/1.05, (blackbarsize/2)+1);

// music button on/off
draw_sprite(spr_music_button, global.music, view_wport[0]/1.08, (blackbarsize/2)+1);

// pause/unpause button
if global.gamepause {
    draw_sprite(spr_pause_button, 0, view_wport[0]/1.112, (blackbarsize/2)+1);
} else {
    draw_sprite(spr_unpause_button, 0, view_wport[0]/1.112, (blackbarsize/2)+1);
}

// wealth
draw_healthbar(view_wport[0]/2.8 - 12, 2, view_wport[0]/2.8 + 12, blackbarsize-2, (global.wealth-1)*25, global.UIcolordark, global.starcolor, global.starcolor, 3, true, false);
draw_sprite(spr_wealth, 0, view_wport[0]/2.8, (blackbarsize/2)+1);

// medals
draw_sprite(spr_medals, global.bronzemedal, posmedals, (blackbarsize/2)+1);
draw_sprite(spr_medals, global.silvermedal, posmedals + 30, (blackbarsize/2)+1);
draw_sprite(spr_medals, global.goldmedal, posmedals + 60, (blackbarsize/2)+1);

// reset font
draw_set_colour(c_black);
draw_set_font(debugfont);


// target window    
if global.selected != "" {
    // outline rectangle
    draw_rectangle(view1_x, view1_y, view1_x+150, view1_y+150, true);  
    
    // background filler rectangle for name
    draw_set_alpha(0.4);
    draw_rectangle_colour(view1_x, view1_y+125, view1_x+150, view1_y+150, c_black, c_black, c_black, c_black, false); 
    draw_set_alpha(1);
    
    // text name + laste name
    draw_set_font(UI);
    draw_set_colour(c_white);
    draw_set_halign(fa_center);
    if global.selected.iam == "customer" {
        draw_text(view1_x+75, view1_y+130, global.selected.name + " " + global.selected.lastname);
    } else {
        draw_text(view1_x+75, view1_y+130, global.selected.name + " (Lv " +  string(global.selected.level) + ")");
    }
    draw_set_halign(fa_left);
    draw_set_colour(c_black);
    draw_set_font(debugfont);
    
    // bars
    if global.selected.iam == "customer" {
        
        // happiness bar
        draw_set_alpha(0.6);
        draw_roundrect_colour(view1_x, view1_y+160, view1_x+110, view1_y+190, c_black, c_black, false); 
        draw_set_alpha(1);
        draw_healthbar(view1_x+28, view1_y+170, view1_x+82, view1_y+180, global.selected.happiness, c_black, c_red, c_yellow, 0, true, true);
        draw_sprite(spr_smileys, 1, view1_x+5, view1_y+168);
        draw_sprite(spr_smileys, 0, view1_x+90, view1_y+168);
        
    } else if global.selected.iam == "server" &amp;&amp; !global.selected.fired {    
        // background filler rectangle for options buttons
        draw_set_alpha(0.6);
        draw_roundrect_colour(view1_x, view1_y+160, view1_x+110, view1_y+213, c_black, c_black, false); 
        draw_set_alpha(1);
        
        // wit and speed bars
        draw_healthbar(view1_x+40, view1_y+171, view1_x+100, view1_y+173, (global.selected.wit-0.8)*97, c_black, c_yellow, c_yellow, 0, true, false);
        draw_healthbar(view1_x+40, view1_y+186, view1_x+100, view1_y+188, (global.selected.spd-2.4)*32, c_black, c_yellow, c_yellow, 0, true, false);
        
        // text
        draw_set_font(UI_tooltip);
        draw_set_colour(c_white);
        draw_text(view1_x+10, view1_y+165, "WIT");
        draw_text(view1_x+10, view1_y+180, "SPD");
        draw_text(view1_x+10, view1_y+195, "SLR");
        draw_set_halign(fa_right);
        draw_text(view1_x+100, view1_y+195, "$" + string(global.selected.salary));
        draw_set_halign(fa_left);
        draw_set_colour(c_black);
        draw_set_font(debugfont);
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// DEBUG
if global.showdebug2 {

    draw_text(64, 32, 
    //"Customers on screen = " + string(instance_number(obj_customer)) + "#" +
    "selected item = " + string(global.selecteditem) + "#" +
    "obj = " + string(instance_place(mouse_x, mouse_y, all)) + "#" +
    //"rot = " + string(global.itemrot) + "#" +
    //"nb seats = " + string(global.nbseats) + "#" +
    //"nb occ seats = " + string(global.nboccseats) + "#" +
    "placeable = " + string(global.placeable)+ "#" +
    //"nb free seats = " + string(global.nbfreeseats) + "#" + "#" +
    //"nb toilet seats = " + string(global.nbtoiletseats) + "#" +
    //"nb toilet occ seats = " + string(global.nbocctseats) + "#" +
    //"nb toilet free seats = " + string(global.nbfreetseats) + "#" + "#" +
    //"Unreachable seats! = " + string(global.unreachableseats) + "#" +
    //"Unreachable toilet seats = " + string(global.unreachabletoiletseats) + "#" +
    //"nb bar spots = " + string(global.nbbarspots) + "#" +
   // "nb unreachable bar spots = " + string(global.unreachablebarspots) + "#" +
    //"nb occupied spots = " + string(global.nboccbarspots) + "#" +
    //"nb free bar spots = " + string(global.nbfreebarspots) + "#" +
    //"nb free bar spots = " + string(global.nbfreebarspots) + "#" +
    "selected menu = " + string(global.selectedmenu) + "#" +
    "avg waiting time = " + string(global.avgwaitingtime) + "#" +
    //"sprx = " + string(obj_controller.sprx) + "#" +
    //"spry = " + string(obj_controller.spry) + "#" +
    "SCALE = " + string(SCALE) + "#" +
    "Congrats = " + string(cdmessages[9]) + "#" +
    "Stuck = " + string(cdmessages[12]) + "#" +
    "left no toilet = " + string(global.leftnotoilet) + "#" +
    "left wait too long = " + string(global.leftwaitedtoolong) + "#" +
    "#"
    );
    
    // LOG
    draw_set_colour(c_maroon);
    draw_text(32, 650, 
    string(global.log[4]) + "#" +
    string(global.log[3]) + "#" +
    string(global.log[2]) + "#" +
    string(global.log[1]) + "#" +
    string(global.log[0]));
    draw_set_colour(c_black);

    // Orders list
    for (i=0; i &lt; ds_list_size(obj_controller.orderslist)*20; i+=20){
        draw_text(700, 40+i, string(i/20) + " = " + string(obj_controller.orderslist[| i/20]));
    }
    
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
